{"ast":null,"code":"var _jsxFileName = \"/Users/tengizusupov/Documents/KursIT/front/src/pages/Change.js\";\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport axios from \"axios\";\nimport { useParams, Redirect } from \"react-router-dom\";\nimport M from \"materialize-css\";\nexport default function Change(props) {\n  const {\n    auth,\n    loader\n  } = props;\n  const {\n    id\n  } = useParams();\n  const [news, setNews] = useState({\n    title: \"\",\n    type: \"\",\n    body: \"\"\n  });\n  const [loading, setLoading] = useState(true);\n  const fetchData = useCallback(async () => {\n    try {\n      const res = await axios.get(\"/news/get/\" + id);\n      setLoading(false);\n      setNews(res.data);\n      M.AutoInit();\n      M.updateTextFields();\n    } catch (e) {\n      console.log(e);\n    }\n  }, [id]);\n\n  const handleSubmit = async e => {\n    const {\n      title,\n      type,\n      body\n    } = news;\n\n    try {\n      const res = await axios.post('/news/update', {\n        _id: id,\n        title,\n        type,\n        body\n      });\n      console.log(res);\n      setNews({\n        title: \"\",\n        type: \"\",\n        body: \"\"\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const handleInput = e => {\n    setNews({ ...news,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n  if (!auth.creator) return /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/news\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 28\n    }\n  });\n  if (loading) return loader;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"col s12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-field col s12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons prefix\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }\n  }, \"assignment_late\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"title\",\n    name: \"title\",\n    type: \"text\",\n    className: \"validate\",\n    value: news.title,\n    onChange: handleInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }\n  }, \"\\u0417\\u0430\\u0433\\u043E\\u043B\\u043E\\u0432\\u043E\\u043A...\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-field col s12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons prefix\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, \"assignment_turned_in\"), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"type\",\n    value: news.type,\n    onChange: handleInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 10\n    }\n  }, \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0435\\u0442\\u0435 \\u0442\\u0435\\u043C\\u0443...\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\\u0421\\u043F\\u043E\\u0440\\u0442\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 10\n    }\n  }, \"\\u0421\\u043F\\u043E\\u0440\\u0442\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\\u041D\\u0430\\u0443\\u043A\\u0430\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 10\n    }\n  }, \"\\u041D\\u0430\\u0443\\u043A\\u0430\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\\u041E\\u0431\\u0440\\u0430\\u0437\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 10\n    }\n  }, \"\\u041E\\u0431\\u0440\\u0430\\u0437\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435\")), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 8\n    }\n  }, \"\\u0422\\u0435\\u043C\\u0430\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-field col s12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons prefix\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, \"assignment\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    id: \"body\",\n    name: \"body\",\n    className: \"materialize-textarea\",\n    value: news.body,\n    onChange: handleInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  }, \"\\u0422\\u0435\\u043B\\u043E \\u043D\\u043E\\u0432\\u043E\\u0441\\u0442\\u0438...\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col s12 center-align\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn\",\n    onClick: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }\n  }, \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\", /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 6\n    }\n  }, \"mode_edit\")))));\n}","map":{"version":3,"sources":["/Users/tengizusupov/Documents/KursIT/front/src/pages/Change.js"],"names":["React","useState","useEffect","useCallback","axios","useParams","Redirect","M","Change","props","auth","loader","id","news","setNews","title","type","body","loading","setLoading","fetchData","res","get","data","AutoInit","updateTextFields","e","console","log","handleSubmit","post","_id","handleInput","target","name","value","creator"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useCallback} from \"react\";\nimport axios from \"axios\";\nimport { useParams, Redirect } from \"react-router-dom\";\nimport M from \"materialize-css\";\n\nexport default function Change(props) {\n\tconst {auth, loader} = props\n\tconst {id} = useParams()\n\tconst [news, setNews] = useState({title: \"\", type: \"\", body:\"\"})\n\tconst [loading, setLoading] = useState(true)\n\n\tconst fetchData = useCallback(async ()=>{\n\t\ttry {\n\t\t\tconst res = await axios.get(\"/news/get/\"+id)\n\t\t\tsetLoading(false)\n\t\t\tsetNews(res.data)\n\t\t\tM.AutoInit()\n\t\t\tM.updateTextFields()\n\t\t} catch(e) {\n\t\t\tconsole.log(e)\n\t\t}\n\t}, [id])\n\n\tconst handleSubmit = async (e) => {\n\t\tconst {title, type, body} = news\n\t\ttry {\n\t\t\tconst res = await axios.post('/news/update', {_id: id, title, type, body})\n\t\t\tconsole.log(res)\n\t\t\tsetNews({title: \"\", type: \"\", body:\"\"})\n\t\t} catch(e) {\n\t\t\tconsole.log(e)\n\t\t}\n\t}\n\n\tconst handleInput = (e) => {\n\t\tsetNews({...news, [e.target.name]: e.target.value})\n\t}\n\n\tuseEffect(()=>{\n\t\tfetchData()\n\t}, [fetchData])\n\n\tif (!auth.creator) return(<Redirect to=\"/news\" />)\n\tif (loading) return(loader)\n\treturn(<div className=\"container\">\n\t\t<div className=\"row\">\n\t\t  <form className=\"col s12\">\n\t\t    <div className=\"row\">\n\t\t      <div className=\"input-field col s12\">\n          \t\t<i className=\"material-icons prefix\">assignment_late</i>\n\t\t        <input \n\t\t        id=\"title\" \n\t\t        name=\"title\"\n\t\t        type=\"text\" \n\t\t        className=\"validate\"\n\t\t        value={news.title} \n\t\t        onChange={handleInput}\n\t\t        />\n\t\t        <label htmlFor=\"title\">Заголовок...</label>\n\t\t      </div>\n\n\t\t\t  <div className=\"input-field col s12\">\n          \t\t<i className=\"material-icons prefix\">assignment_turned_in</i>\n\t\t\t    <select \n\t\t\t    name=\"type\"\n\t\t\t    value={news.type} \n\t\t\t    onChange={handleInput}\n\t\t\t    >\n\t\t\t      <option value=\"\">Выберете тему...</option>\n\t\t\t      <option value=\"Спорт\">Спорт</option>\n\t\t\t      <option value=\"Наука\">Наука</option>\n\t\t\t      <option value=\"Образование\">Образование</option>\n\t\t\t    </select>\n\t\t\t    <label>Тема</label>\n\t\t\t  </div>\n\n\t\t      <div className=\"input-field col s12\">\n          \t\t<i className=\"material-icons prefix\">assignment</i>\n\t\t        <textarea \n\t\t        id=\"body\" \n\t\t        name=\"body\" \n\t\t        className=\"materialize-textarea\"\n\t\t        value={news.body} \n\t\t        onChange={handleInput}\n\t\t        />\n\t\t        <label htmlFor=\"body\">Тело новости...</label>\n\t\t      </div>\n\t\t    </div>\n\t\t  </form>\n\t\t\t<div className=\"col s12 center-align\">\n\t\t\t\t<button className=\"btn\" onClick={handleSubmit}>\n\t\t\t\t\tИзменить\n\t\t\t\t\t<i className=\"material-icons right\">mode_edit</i>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t\t</div>)\n\n}"]},"metadata":{},"sourceType":"module"}