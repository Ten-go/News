{"ast":null,"code":"var _jsxFileName = \"/Users/tengizusupov/Documents/KursIT/front/src/pages/NewsList.js\";\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport axios from \"axios\";\nimport M from \"materialize-css\";\nimport { NavLink } from 'react-router-dom';\nexport default function NewsList(props) {\n  const {\n    loader,\n    auth\n  } = props;\n  const [loading, setLoading] = useState(true);\n  const [filter, setFilter] = useState(\"\");\n  const [news, setNews] = useState([]);\n  const [newsS, setNewsS] = useState([]);\n  const [sort, setSort] = useState(\"0\");\n\n  const sortF = value => {\n    switch (value) {\n      case '0':\n        return;\n\n      case '1':\n        return setNews(news.sort((a, b) => new Date(b.updatedAt) - new Date(a.updatedAt)));\n\n      case '2':\n        return setNews(news.sort((a, b) => new Date(a.updatedAt) - new Date(b.updatedAt)));\n\n      default:\n        console.log(value);\n    }\n  };\n\n  const handleFilter = e => {\n    const value = e.target.value;\n    if (value) setNews(news.filter(e => new Date(e.updatedAt.slice(0, 10)) - new Date(value) === 0));else setNews(newsS);\n    setFilter(value);\n    sortF(sort);\n  };\n\n  const handleSort = e => {\n    const value = e.target.value;\n    setSort(value);\n    sortF(value);\n  };\n\n  const handleBookmark = async (e, newsId) => {\n    e.preventDefault();\n\n    try {\n      const res = await axios.post('/saved', {\n        userId: auth.id,\n        newsId\n      });\n      console.log(res);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const handleRemove = async (e, _id) => {\n    e.preventDefault();\n\n    try {\n      const res = await axios.post('/news/delete', {\n        _id\n      });\n      console.log(res);\n      fetchData();\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const fetchData = useCallback(async () => {\n    try {\n      const res = await axios.get(\"/news\");\n      setLoading(false);\n      setNews(res.data);\n      setNewsS(res.data);\n      M.AutoInit();\n    } catch (e) {\n      console.log(e);\n    }\n  }, []);\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n  if (loading) return loader;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"input-field col s12\",\n    style: {\n      position: \"fixed\",\n      top: 75,\n      zIndex: 3,\n      left: 5\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    id: \"filter\",\n    type: \"date\",\n    class: \"validate\",\n    value: filter,\n    onChange: handleFilter,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    for: \"filter\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, \"\\u0412\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C \\u0434\\u0430\\u0442\\u0443\"), /*#__PURE__*/React.createElement(\"select\", {\n    value: sort,\n    onChange: handleSort,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"0\",\n    disabled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 15\n    }\n  }, \"\\u0412\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C \\u0441\\u043E\\u0440\\u0442\\u0438\\u0440\\u043E\\u0432\\u043A\\u0443...\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 15\n    }\n  }, \"\\u041F\\u043E \\u0443\\u0431\\u044B\\u0432\\u0430\\u043D\\u0438\\u044E \\u0434\\u0430\\u0442\\u044B\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 15\n    }\n  }, \"\\u041F\\u043E \\u0432\\u043E\\u0437\\u0440\\u0430\\u0441\\u0442\\u0430\\u043D\\u0438\\u044E \\u0434\\u0430\\u0442\\u044B\")), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, \"\\u0421\\u043E\\u0440\\u0442\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430\")), news.length ? news.map(news => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col s12 m6 z-depth-4\",\n    key: news._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card blue-grey darken-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-content white-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"card-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 33\n    }\n  }, news.title), /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 33\n    }\n  }, news.type)), news.body.split('\\n').map((e, num) => /*#__PURE__*/React.createElement(\"p\", {\n    key: num,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 66\n    }\n  }, e))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-action\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/\",\n    onClick: e => handleBookmark(e, news._id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 29\n    }\n  }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0432 \\u0437\\u0430\\u043A\\u043B\\u0430\\u0434\\u043A\\u0438\"), auth.creator ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"fixed-action-btn  horizontal direction-left\",\n    style: {\n      zIndex: 1,\n      position: \"absolute\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"btn-floating btn-large red\",\n    href: \"/\",\n    onClick: e => e.preventDefault(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 39\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"large material-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 41\n    }\n  }, \"arrow_back\")), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 39\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/\",\n    className: \"btn-floating green\",\n    onClick: e => handleRemove(e, news._id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 49\n    }\n  }, \"remove\"))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    to: \"/change/\" + news._id,\n    className: \"btn-floating blue\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 49\n    }\n  }, \"mode_edit\"))))) : null, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 29\n    }\n  }, \"\\u0421\\u043E\\u0437\\u0434\\u0430\\u043D\\u043E: \", new Date(news.updatedAt).toLocaleDateString(), \" \\u0432: \", new Date(news.updatedAt).toTimeString().slice(0, 5)))))) : /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }\n  }, \"\\u041F\\u043E\\u043A\\u0430 \\u043D\\u043E\\u0432\\u043E\\u0441\\u0442\\u0435\\u0439 \\u043D\\u0435\\u0442...\"), auth.creator ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"fixed-action-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    to: \"/create\",\n    className: \"btn-floating btn-large red\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"large material-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }\n  }, \"add\"))) : null);\n}","map":{"version":3,"sources":["/Users/tengizusupov/Documents/KursIT/front/src/pages/NewsList.js"],"names":["React","useState","useEffect","useCallback","axios","M","NavLink","NewsList","props","loader","auth","loading","setLoading","filter","setFilter","news","setNews","newsS","setNewsS","sort","setSort","sortF","value","a","b","Date","updatedAt","console","log","handleFilter","e","target","slice","handleSort","handleBookmark","newsId","preventDefault","res","post","userId","id","handleRemove","_id","fetchData","get","data","AutoInit","position","top","zIndex","left","length","map","title","type","body","split","num","creator","toLocaleDateString","toTimeString"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useCallback} from \"react\"\nimport axios from \"axios\"\nimport M from \"materialize-css\"\nimport {NavLink} from 'react-router-dom'\n \nexport default function NewsList(props) {\n    const {loader, auth} = props\n    const [loading, setLoading] = useState(true)\n    const [filter, setFilter] = useState(\"\")\n    const [news, setNews] = useState([])\n    const [newsS, setNewsS] = useState([])\n    const [sort, setSort] = useState(\"0\")\n \n    const sortF = (value) => {\n        switch (value) {\n            case '0':\n                return\n            case '1':\n                return(setNews(news.sort((a, b)=> new Date(b.updatedAt) - new Date(a.updatedAt))))\n            case '2':\n                return(setNews(news.sort((a, b)=> new Date(a.updatedAt) - new Date(b.updatedAt))))\n            default:\n                console.log(value)\n        }\n    }\n \n    const handleFilter = (e) => {\n        const value = e.target.value\n        if (value) setNews(news.filter(e=>new Date(e.updatedAt.slice(0, 10)) - new Date(value) === 0))\n            else setNews(newsS)\n        setFilter(value)\n        sortF(sort)\n    }\n \n    const handleSort = (e) => {\n        const value = e.target.value\n        setSort(value)\n        sortF(value)\n    }\n \n    const handleBookmark = async (e, newsId) =>{\n        e.preventDefault()\n        try {\n            const res = await axios.post('/saved', {userId: auth.id, newsId})\n            console.log(res)\n        } catch(e) {\n            console.log(e)\n        }\n    }\n \n    const handleRemove = async (e, _id) =>{\n        e.preventDefault()\n        try {\n            const res = await axios.post('/news/delete', {_id})\n            console.log(res)\n            fetchData()\n        } catch(e) {\n            console.log(e)\n        }\n    }\n \n    const fetchData = useCallback(async ()=>{\n        try {\n            const res = await axios.get(\"/news\")\n            setLoading(false)\n            setNews(res.data)\n            setNewsS(res.data)\n            M.AutoInit()\n        } catch(e) {\n            console.log(e)\n        }\n    }, [])\n \n    useEffect(()=>{\n        fetchData()\n    }, [fetchData])\n \n    if (loading) return(loader)\n    return(<div className=\"container\">\n          <div class=\"input-field col s12\" style={{position: \"fixed\", top: 75, zIndex: 3, left: 5}}>\n            <input id=\"filter\" type=\"date\" class=\"validate\" value={filter} onChange={handleFilter}/>\n            <label for=\"filter\">Выбрать дату</label>\n            <select value={sort} onChange={handleSort}>\n              <option value=\"0\" disabled>Выбрать сортировку...</option>\n              <option value=\"1\">По убыванию даты</option>\n              <option value=\"2\">По возрастанию даты</option>\n            </select>\n            <label>Сортировка</label>\n          </div>\n        {(news.length)?\n            news.map(news=>(\n                    <div className=\"col s12 m6 z-depth-4\" key={news._id}>\n                      <div className=\"card blue-grey darken-1\">\n                        <div className=\"card-content white-text\">\n                            <span className=\"card-title\">\n                                <h2>{news.title}</h2>\n                                <h5>{news.type}</h5>\n                                </span>\n                            {news.body.split('\\n').map((e, num)=><p key={num}>{e}</p>)}\n                        </div>\n                        <div className=\"card-action\">\n                            <a href=\"/\" onClick={(e)=>handleBookmark(e, news._id)}>Добавить в закладки</a>\n                            {(auth.creator)?           \n                                    <div className=\"fixed-action-btn  horizontal direction-left\" style={{zIndex: 1,position: \"absolute\"}}>\n                                      <a className=\"btn-floating btn-large red\" href=\"/\" onClick={e=>e.preventDefault()}>\n                                        <i className=\"large material-icons\">arrow_back</i>\n                                      </a>\n                                      <ul>\n                                        <li>\n                                            <a\n                                            href=\"/\"\n                                            className=\"btn-floating green\"\n                                            onClick={(e)=>handleRemove(e, news._id)}\n                                            >\n                                                <i className=\"material-icons\">remove</i>\n                                            </a>\n                                        </li>\n                                        <li>\n                                            <NavLink\n                                            to={\"/change/\"+news._id}\n                                            className=\"btn-floating blue\"\n                                            >\n                                                <i className=\"material-icons\">mode_edit</i>\n                                            </NavLink>\n                                        </li>\n                                      </ul>\n                                    </div>\n                                :\n                                null\n                            }\n                            <p>Создано: {(new Date(news.updatedAt)).toLocaleDateString()} в: {(new Date(news.updatedAt)).toTimeString().slice(0, 5)}</p>\n                        </div>\n                      </div>\n                    </div>)\n            )\n            :\n            <h2 className=\"center\">Пока новостей нет...</h2>\n        }\n        {(auth.creator)?\n            <div className=\"fixed-action-btn\">\n              <NavLink to=\"/create\" className=\"btn-floating btn-large red\">\n                <i className=\"large material-icons\">add</i>\n              </NavLink>\n            </div>\n            :\n            null\n        }\n    </div>)\n}"]},"metadata":{},"sourceType":"module"}